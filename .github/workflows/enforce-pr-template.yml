name: Enforce PR Template (Reusable)

on:
  workflow_call:

jobs:
  validate-pr-template:
    runs-on: ubuntu-latest
    steps:
      - name: Validate PR Description
        uses: actions/github-script@v7
        with:
          script: |
            const prBody = context.payload.pull_request.body || '';
            const prNumber = context.payload.pull_request.number;

            if (!prBody.trim()) {
              core.setFailed('PR description is empty');
            }

            if (!prBody.includes("Target Branch")) {
              core.setFailed("Missing Target Branch in PR template");
            }

            if (!prBody.includes("Source Branch")) {
              core.setFailed("Missing Source Branch in PR template");
            }

            console.log("PR Template validation passed.");
